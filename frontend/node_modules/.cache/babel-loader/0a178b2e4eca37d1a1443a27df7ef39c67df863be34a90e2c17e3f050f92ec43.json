{"ast":null,"code":"import\"./ToDoList.css\";import{useEffect,useState,useRef}from\"react\";import axios from\"axios\";import{BiSolidTrash}from\"react-icons/bi\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ToDoList(_ref){let{listId,handleBackButton}=_ref;let labelRef=useRef();const[listData,setListData]=useState(null);useEffect(()=>{const fetchData=async()=>{const response=await axios.get(\"/api/lists/\".concat(listId));const newData=await response.data;setListData(newData);};fetchData();},[listId]);function handleCreateItem(label){const updateData=async()=>{const response=await axios.post(\"/api/lists/\".concat(listData.id,\"/items/\"),{label:label});setListData(await response.data);};updateData();}function handleDeleteItem(id){const updateData=async()=>{const response=await axios.delete(\"/api/lists/\".concat(listData.id,\"/items/\").concat(id));setListData(await response.data);};updateData();}function handleCheckToggle(itemId,newState){const updateData=async()=>{const response=await axios.patch(\"/api/lists/\".concat(listData.id,\"/checked_state\"),{item_id:itemId,checked_state:newState});setListData(await response.data);};updateData();}if(listData===null){return/*#__PURE__*/_jsxs(\"div\",{className:\"ToDoList loading\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:handleBackButton,children:\"Back\"}),\"Loading to-do list ...\"]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"ToDoList\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:handleBackButton,children:\"Back\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"List: \",listData.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"New Item:\\xA0\",/*#__PURE__*/_jsx(\"input\",{id:labelRef,type:\"text\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCreateItem(document.getElementById(labelRef).value),children:\"New\"})]}),listData.items.length>0?listData.items.map(item=>{return/*#__PURE__*/_jsxs(\"div\",{className:item.checked?\"item checked\":\"item\",onClick:()=>handleCheckToggle(item.id,!item.checked),children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.checked?\"✅\":\"⬜️\",\" \"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"label\",children:[item.label,\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"flex\"}),/*#__PURE__*/_jsx(\"span\",{className:\"trash\",onClick:evt=>{evt.stopPropagation();handleDeleteItem(item.id);},children:/*#__PURE__*/_jsx(BiSolidTrash,{})})]},item.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:\"There are currently no items.\"})]});}export default ToDoList;","map":{"version":3,"names":["useEffect","useState","useRef","axios","BiSolidTrash","jsx","_jsx","jsxs","_jsxs","ToDoList","_ref","listId","handleBackButton","labelRef","listData","setListData","fetchData","response","get","concat","newData","data","handleCreateItem","label","updateData","post","id","handleDeleteItem","delete","handleCheckToggle","itemId","newState","patch","item_id","checked_state","className","children","onClick","name","type","document","getElementById","value","items","length","map","item","checked","evt","stopPropagation"],"sources":["/Users/sohan/Desktop/todo-list/frontend/src/ToDoList.js"],"sourcesContent":["import \"./ToDoList.css\";\nimport { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport { BiSolidTrash } from \"react-icons/bi\";\n\nfunction ToDoList({ listId, handleBackButton }) {\n  let labelRef = useRef();\n  const [listData, setListData] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await axios.get(`/api/lists/${listId}`);\n      const newData = await response.data;\n      setListData(newData);\n    };\n    fetchData();\n  }, [listId]);\n\n  function handleCreateItem(label) {\n    const updateData = async () => {\n      const response = await axios.post(`/api/lists/${listData.id}/items/`, {\n        label: label,\n      });\n      setListData(await response.data);\n    };\n    updateData();\n  }\n\n  function handleDeleteItem(id) {\n    const updateData = async () => {\n      const response = await axios.delete(\n        `/api/lists/${listData.id}/items/${id}`\n      );\n      setListData(await response.data);\n    };\n    updateData();\n  }\n\n  function handleCheckToggle(itemId, newState) {\n    const updateData = async () => {\n      const response = await axios.patch(\n        `/api/lists/${listData.id}/checked_state`,\n        {\n          item_id: itemId,\n          checked_state: newState,\n        }\n      );\n      setListData(await response.data);\n    };\n    updateData();\n  }\n\n  if (listData === null) {\n    return (\n      <div className=\"ToDoList loading\">\n        <button className=\"back\" onClick={handleBackButton}>\n          Back\n        </button>\n        Loading to-do list ...\n      </div>\n    );\n  }\n  return (\n    <div className=\"ToDoList\">\n      <button className=\"back\" onClick={handleBackButton}>\n        Back\n      </button>\n      <h1>List: {listData.name}</h1>\n      <div className=\"box\">\n        <label>\n          New Item:&nbsp;\n          <input id={labelRef} type=\"text\" />\n        </label>\n        <button\n          onClick={() =>\n            handleCreateItem(document.getElementById(labelRef).value)\n          }\n        >\n          New\n        </button>\n      </div>\n      {listData.items.length > 0 ? (\n        listData.items.map((item) => {\n          return (\n            <div\n              key={item.id}\n              className={item.checked ? \"item checked\" : \"item\"}\n              onClick={() => handleCheckToggle(item.id, !item.checked)}\n            >\n              <span>{item.checked ? \"✅\" : \"⬜️\"} </span>\n              <span className=\"label\">{item.label} </span>\n              <span className=\"flex\"></span>\n              <span\n                className=\"trash\"\n                onClick={(evt) => {\n                  evt.stopPropagation();\n                  handleDeleteItem(item.id);\n                }}\n              >\n                <BiSolidTrash />\n              </span>\n            </div>\n          );\n        })\n      ) : (\n        <div className=\"box\">There are currently no items.</div>\n      )}\n    </div>\n  );\n}\n\nexport default ToDoList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}